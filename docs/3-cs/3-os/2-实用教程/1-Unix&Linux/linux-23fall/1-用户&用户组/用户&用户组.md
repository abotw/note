# 用户 & 用户组

!!! abstract

    1.   为何需要「用户」？
    2.   Linux 下的用户概述
         -   根用户
         -   系统用户
         -   普通用户
    3.   如何切换用户？
    4.   Linux 下的用户组概述
    5.   如何通过命令行配置用户信息？
         -   密码

## File 文件

### File list

*参见：<https://wiki.archlinux.org/title/Users_and_groups#File_list>*

|      File      |                       Purpose                        |
| :------------: | :--------------------------------------------------: |
| `/etc/shadow`  |           Secure user account information            |
| `/etc/passwd`  |               User account information               |
| `/etc/gshadow` | Contains the shadowed information for group accounts |
|  `/etc/group`  |       Defines the groups to which users belong       |

### `/etc/passwd`

-   [`/etc/passwd` file  @rockylinux](https://docs.rockylinux.org/books/admin_guide/06-users/#etcpasswd-file)

-   <https://wiki.archlinux.org/title/Users_and_groups#User_database>

``` sh
$ man 5 passwd
```

**root 用户，根用户**

``` bash
$ head -1 /etc/passwd
root:x:0:0:root:/root:/usr/bin/zsh
```

### `/etc/shadow`

### `/etc/sudoers`

``` bash
$ man sudoers
```

## Command 命令

### `su`

``` bash
$ sudo su
root@VM-4-8-ubuntu:/home/ubuntu# id
uid=0(root) gid=0(root) groups=0(root)
```

### `sudo`

``` bash
$ sudo !!
$ sudo -u nobody id
uid=65534(nobody) gid=65534(nogroup) groups=65534(nogroup)
```

---

`sudo` 为用户提供管理（admin）权限，允许用户使用 `root` 用户的安全权限来运行程序。全新安装的 Ubuntu 系统默认 `root` 密码是随机的，每次开机都会有一个新的密码。

如果想把该密码固定，可以打开终端，输入以下命令。重复输入两次密码进行设置（输入过程中，字符不会显示）。

```
sudo passwd
```

此时我们可以通过以下命令切换到 `root` 用户。注意，在 `root` 用户下所有操作都是允许的，切记不要误改文件，否则无法恢复。

```
su root
cs@stickmind:~$ su root
Password: 
root@stickmind:/home/cs# 
```

``` sh
ubuntu@VM-4-8-ubuntu:~$ sudo passwd
New password:
Retype new password:
passwd: password updated successfully
ubuntu@VM-4-8-ubuntu:~$ su root
Password:
root@VM-4-8-ubuntu:/home/ubuntu#
```



### `visudo`



---

## Read & Study & Practice

-   [ ] [用户与用户组 @linux101](https://101.lug.ustc.edu.cn/Ch05/#users-and-groups)